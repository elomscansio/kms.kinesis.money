const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Chart--asC7R1O.js","assets/index-B1IYvx0M.js","assets/index-D04vYMJd.css","assets/index-Bo_9n-PG.js","assets/currencyFormatter-DqHkUfNj.js","assets/index-DamApG0r.js","assets/index-BdZiPhrX.js","assets/getCurrencySymbol-U33HH9zA.js","assets/fiat-currencies-4YJiRIqJ.js","assets/index-CVGWP4XK.js","assets/index-DMBgV4GW.js","assets/order-direction-B5kfqJoW.js","assets/TargetPrice-BEA8clvm.js","assets/Names-CaXmBvXg.js","assets/index-DWKsSpgP.js","assets/order-source-yjVi4RrL.js","assets/react-number-format.es-D6j4F3wj.js","assets/TextField-DL0nOe5P.js","assets/useSlot-DZH0Y2jJ.js","assets/useFormControl-B5X7CYHM.js","assets/Menu-CbwN-UdZ.js","assets/index.esm-B2HhHynd.js","assets/CurrencyIcon-BSh20PSx.js","assets/order-type-BEH08Hfo.js","assets/helpers-BxXgrS-G.js","assets/helpers-D0lXFcyB.js","assets/useRequireStatus-C5948B1u.js","assets/index-DcvGW77o.js","assets/executed-orders.listener-GkgxCqGH.js","assets/depth.listener-Bb9oU3qt.js","assets/socket-client-ClPHFSdE.js","assets/index-DQUs1ZHf.js","assets/SegmentedTab-Bx0ApLVn.js","assets/Tabs-nCopnh2s.js","assets/capitalize-Crm3kySE.js","assets/toString-BcLWPS8a.js","assets/isObjectLike-BR2ybR99.js","assets/isArray-Dxzbedgu.js","assets/isSymbol-CPa7d4e7.js","assets/upperFirst-DZHx3_7l.js","assets/_baseSlice-F8doVSIJ.js","assets/index-DeSxTRGL.js","assets/Skeleton-D3zW9zfH.js","assets/Input-U7WLNE8T.js","assets/PasswordInput-BRrGqd8k.js","assets/shared-kyc.form-DU9uJhtw.js","assets/chart-VlffLmI0.js","assets/Alert-D9otgbzb.js","assets/IconButton-ClDlR7xP.js","assets/OnBoardingPopUp-CbaltDgU.js","assets/legacy-fonts-BbYsH4nw.js","assets/DropdownChipBase-Tvm1Fi1i.js","assets/Chip-BmP1UBlr.js","assets/usePrivacyMode-sFMhOLJ_.js","assets/short-names-CEnQyANM.js","assets/Collapse-UbjukSi0.js","assets/index-muQS-9Gf.js","assets/index-BBKt8-YL.js","assets/index-C7glG_Ry.js","assets/DialogContent-A833hUPt.js","assets/shared-CWEmH2rA.js","assets/Tooltip-QCFsSCkk.js","assets/createPopper-DLtJTqii.js","assets/Divider-DtXA8bzM.js","assets/dividerClasses-CKrR6pKE.js","assets/index-Do1i7yHT.js","assets/BubbleTab-BNonz68w.js","assets/MenuItem-wDwmnSJr.js","assets/index.es-B63JM6fg.js","assets/index-D4hGd7fZ.js","assets/isObject-C3e4t58V.js","assets/index-CxjVi7H7.css","assets/useOverflowFade-BK4lhouq.js","assets/index-Sia8Y9vT.js","assets/index-J1GP0RDZ.js","assets/accounts-CTdEXpRp.js","assets/Checkbox-azwF4S2Y.js","assets/Switch-mECX2JQG.js","assets/Action-Chaeft7b.js","assets/DialogActions-CR6pyUZM.js","assets/Basic-C8TpTkuW.js","assets/visitHistory-VyF4gOMN.js","assets/feature-flag-CBj2T29d.js"])))=>i.map(i=>d[i]);
import{q as ee,r as x,j as e,w as c,x as ce,bg as Te,e as ke,ax as ue,aw as ie,d as D,bv as Ye,ff as Pe,ag as Ke,C as g,ez as De,B as v,cS as Z,R as F,t as d,bY as Fe,b1 as Ie,bO as Qe,F as W,H as pe,c7 as Q,A as Oe,er as Ze,es as Ge,L as Be,ah as Ae,S as Re,df as Xe,u as Je,dj as et,h as Le,o as le,W as ze,P as tt,bu as at,aZ as st,b2 as me,I as rt}from"./index-B1IYvx0M.js";import{C as nt,c as N,u as xe,a as ae,N as ot,j as it,k as lt,P as dt,e as ct,l as b,m as ut,I as pt,B as ge,h as fe,S as xt,b as yt,f as mt,g as gt,O as he,A as ft}from"./order-source-yjVi4RrL.js";import{O as ht,W as vt}from"./OnBoardingPopUp-CbaltDgU.js";import{f as w}from"./currencyFormatter-DqHkUfNj.js";import{N as L,a as S,b as R,A as bt}from"./Names-CaXmBvXg.js";import{D as jt}from"./DropdownChipBase-Tvm1Fi1i.js";import{O as M}from"./order-direction-B5kfqJoW.js";import{O as q}from"./order-type-BEH08Hfo.js";import{S as V}from"./index-DeSxTRGL.js";import{e as Ct,c as Mt}from"./index-DQUs1ZHf.js";import{C as ye,i as A}from"./CurrencyIcon-BSh20PSx.js";import{I as St}from"./Input-U7WLNE8T.js";import"./PasswordInput-BRrGqd8k.js";import{u as He}from"./usePrivacyMode-sFMhOLJ_.js";import{g as de}from"./getCurrencySymbol-U33HH9zA.js";import{C as wt}from"./Chip-BmP1UBlr.js";import{i as ve}from"./TextField-DL0nOe5P.js";import{c as E}from"./short-names-CEnQyANM.js";import{C as Tt}from"./Collapse-UbjukSi0.js";import{A as be}from"./Alert-D9otgbzb.js";import{M as te}from"./index-muQS-9Gf.js";import{a as Ee}from"./shared-CWEmH2rA.js";import{T as kt,t as je}from"./Tooltip-QCFsSCkk.js";import{s as Pt}from"./SegmentedTab-Bx0ApLVn.js";import{M as U,a as k}from"./chart-VlffLmI0.js";import{T as Dt,a as Ft}from"./Tabs-nCopnh2s.js";import{D as It}from"./Divider-DtXA8bzM.js";import{u as Ot}from"./index-BBKt8-YL.js";import{a as Bt}from"./index-Do1i7yHT.js";import{p as At}from"./index.es-B63JM6fg.js";import{L as Rt,C as Lt,b as zt,c as Ht,i as Et,P as $t,d as qt,e as Nt}from"./index-Bo_9n-PG.js";import{b as _t}from"./index-DamApG0r.js";import{i as Vt}from"./fiat-currencies-4YJiRIqJ.js";import{S as Ut}from"./index-D4hGd7fZ.js";import{u as Wt}from"./useOverflowFade-BK4lhouq.js";import{a as Yt}from"./index-J1GP0RDZ.js";import{i as Kt}from"./accounts-CTdEXpRp.js";import{B as Qt,C as Zt}from"./Checkbox-azwF4S2Y.js";import{A as Gt}from"./Action-Chaeft7b.js";import{B as Xt}from"./Basic-C8TpTkuW.js";import{a as Jt,h as ea}from"./visitHistory-VyF4gOMN.js";import{T as ta}from"./legacy-fonts-BbYsH4nw.js";import{f as aa,S as sa}from"./feature-flag-CBj2T29d.js";import{u as ra}from"./useRequireStatus-C5948B1u.js";Lt.register(zt,Ht,Et,$t,qt,Nt);const na=c(Rt,{shouldForwardProp:ce(["$maxHeight","$maxWidth"])})`
  max-height: ${({$maxHeight:a})=>`${a}px`};
  max-width: ${({$maxWidth:a})=>a};
`,oa=a=>{const{data:t,maxHeight:n=32,isPriceUp:r,maxWidth:s="100%"}=a,o=ee(),i=x.useId(),{dataset:l,chartLabels:u}=x.useMemo(()=>{const f=[],y=[];return t.forEach(m=>{f.push(m.value[0]),y.push(m.value[1])}),{dataset:{data:y,borderColor:r?o.palette.designColors.text.price.up:o.palette.designColors.text.price.down,pointBorderColor:"transparent",backgroundColor:"transparent",borderWidth:2,pointRadius:0,pointHoverRadius:0},chartLabels:f,chartFieldData:y}},[t,o,r]);return e.jsx(na,{id:i,$maxHeight:n,$maxWidth:s,data:{labels:u,datasets:[l]},options:{clip:!1,plugins:{legend:{display:!1},tooltip:{enabled:!1},annotation:!1},scales:{x:{display:!1},y:{display:!1}},maintainAspectRatio:!1,responsive:!0}})};Te.injectEndpoints({endpoints:a=>({getOneTrendline:a.query({queryFn:async({symbolId:t})=>({data:(await ue(async()=>{const{default:r}=await import("./mock-market-Bc9e2ahr.js");return{default:r}},[])).default[t]}),keepUnusedDataFor:60*60})}),overrideExisting:ke.dataProvider==="mock"});const ia=a=>{const t={[k.OneHour]:{timeFrame:U.fiveMinutes,requestedFromDate:()=>new Date(new Date().setHours(new Date().getHours()-1))},[k.OneDay]:{timeFrame:U.fifteenMinutes,requestedFromDate:()=>new Date(new Date().setDate(new Date().getDate()-1))},[k.OneWeek]:{timeFrame:U.oneHour,requestedFromDate:()=>new Date(new Date().setDate(new Date().getDate()-7))},[k.OneMonth]:{timeFrame:U.twentyFourHours,requestedFromDate:()=>new Date(new Date().setMonth(new Date().getMonth()-1))},[k.OneQuarter]:{timeFrame:U.twentyFourHours,requestedFromDate:()=>new Date(new Date().setMonth(new Date().getMonth()-3))},[k.OneYear]:{timeFrame:U.twentyFourHours,requestedFromDate:()=>new Date(new Date().setFullYear(new Date().getFullYear()-1))},[k.All]:{timeFrame:U.twentyFourHours,requestedFromDate:()=>new Date(new Date().setFullYear(new Date().getFullYear()-2))}};return{requestedFromDate:t[a].requestedFromDate(),timeFrame:t[a].timeFrame}},la=Te.injectEndpoints({endpoints:a=>({getOneTrendline:a.query({query:t=>{const{symbolId:n,timePeriod:r}=t,{requestedFromDate:s,timeFrame:o}=ia(r);return{url:"market-data/trendlines",params:{symbolIds:n,timeFrame:o,fromDate:s.toISOString(),toDate:new Date().toISOString()}}},keepUnusedDataFor:60*60,transformResponse:t=>Object.values(t)[0]})}),overrideExisting:ke.dataProvider==="api"}),da=la,{useGetOneTrendlineQuery:ca}=da,ua=c(F)(()=>({gap:"8px",alignItems:"center",flex:"70%"})),pa=c(g)(()=>({justifyContent:"center",flex:"30%"})),xa=c(F)(({theme:a})=>({gap:"8px",justifyContent:"space-between",padding:"14px 8px",cursor:"pointer",borderRadius:"4px",":hover":{backgroundColor:a.palette.designColors.surface.hovered,borderRadius:"8px"}})),Ce=c(nt)(({$dailyChange:a,theme:t})=>({fontSize:"inherit",lineHeight:"inherit",color:a?a>=0?t.palette.designColors.text.price.up:t.palette.designColors.text.price.down:void 0})),ya=a=>{const{currencyCode:t,isAsset:n,onCurrencyChange:r,direction:s}=a,o=n&&s===M.buy||!n&&s===M.sell&&!Vt(t),{data:i}=ca({symbolId:`${t}_${ie.USD}`,timePeriod:k.OneDay},{skip:!o}),{preferredCurrencyAvailable:l,preferredCurrency:u,available:f}=D(C=>Ye(C,t))??{},{hide:y}=He(),j=`${t}_${ie.USD}`,{dailyChange:m,latestMidPrice:p}=D(C=>Pe(C,j))??{},I=x.useMemo(()=>m*100,[j]),h=x.useMemo(()=>p,[j]),{quoteDecimals:O}=D(C=>_t(C,j))??0,P=x.useMemo(()=>i!=null&&i.length?i.map(({createdAt:C,price:_})=>({name:C,value:[Ke(C).format("YYYY/MM/DD HH:MM:SS"),_]})):[],[i]);return e.jsxs(xa,{onClick:()=>{r(t)},children:[e.jsxs(ua,{children:[e.jsx(ye,{currencyCode:t,size:"32px"}),e.jsxs(g,{children:[e.jsx(De,{children:E[t]}),e.jsx(v,{subdued:!0,children:t})]})]}),o&&P.length&&e.jsx(oa,{data:P,maxWidth:"62px"}),e.jsxs(pa,{children:[e.jsx(Z,{textAlign:"right",children:o?e.jsx(Ce,{start:h,end:p,decimals:O,preserveValue:!0,duration:1,prefix:"$"}):y(w({value:l??0,code:u},{prependFiatSymbol:!0}))}),e.jsx(v,{subdued:!0,textAlign:"right",children:o?e.jsx(Ce,{start:I,end:m*100,decimals:2,suffix:"%",preserveValue:!0,duration:1,$dailyChange:m}):y(w({value:f??0,code:t},{prependFiatSymbol:!0}))})]})]})},$e=()=>{const{direction:a,orderType:t}=N(),n=[{left:e.jsx(L,{name:R.oneTimePurchase,size:S.twenty,iconSize:S.fourteen}),value:q.market,label:e.jsx(d,{id:"tVqqik",defaultMessage:[{type:0,value:"Instant "},{type:1,value:"direction"}],values:{direction:a}}),description:a===M.buy?e.jsx(d,{id:"dEV3JC",defaultMessage:[{type:0,value:"Purchase at current price"}]}):e.jsx(d,{id:"GW3eKs",defaultMessage:[{type:0,value:"Sell at current price"}]})},{left:e.jsx(L,{name:a===M.buy?R.limitBuy:R.limitSell,size:S.twenty,iconSize:S.fourteen}),value:q.limit,label:e.jsx(d,{id:"FYhx9Y",defaultMessage:[{type:0,value:"Target price"}]}),description:e.jsx(d,{id:"tavEwf",defaultMessage:[{type:0,value:"Set your desired price"}]})}];return{orderType:t,orderTypes:n}},ma=a=>{const{onClick:t,dataCy:n}=a,{orderTypes:r,orderType:s}=$e();return e.jsx(jt,{options:r,value:s,chipStyle:"round",onClick:t,dataCy:n})},ga=c(L)`
  top: calc(50% - 18px);
  left: calc(50% - 18px);
  position: absolute;
  z-index: 10;
`,fa=({onSwap:a,disabled:t})=>e.jsx(ga,{name:R.swap,size:"36px",iconSize:"22px",backgroundColor:n=>n.palette.designColors.surface.default,onClick:t?void 0:a,rounded:!0}),ha=a=>({"&.MuiChip-root":{gap:"8px",fontSize:"18px",lineHeight:"24px",fontWeight:700,fontFamily:a.typography.fonts.HarmonyOsSans.bold,background:"inherit",height:"26px"},"&.MuiChip-filled:active":{boxShadow:"none"},"& .MuiChip-deleteIcon":{margin:0},"& .MuiChip-label":{padding:"0px"},"& .MuiChip-avatar":{margin:0}}),va=c(g)`
  flex: 1;
`,ba=a=>({[`& .${ve.adornedStart}`]:{paddingLeft:0},[`& .${ve.input}`]:{height:"32px",fontSize:"24px",caretColor:a.palette.designColors.interactive.primary.default,padding:0}}),ja=c(F)`
  border-radius: 8px;
  background-color: ${({theme:a})=>a.palette.designColors.interactive.secondary.default};
  padding: 14px 16px;
  width: 100%;
  justify-content: space-between;
  white-space: nowrap;

  :has(.Mui-focused) {
    background-color: ${({theme:a})=>a.palette.designColors.surface.neutral.pressed};
  }
`,Ca=c(g)`
  height: 100%;
  justify-content: center;
`,Me=new Ie(1e12),Se=a=>{const{currency:t,label:n,balance:r,onCurrency:s,dataCy:o}=a,{trade:{focus:i,input:l,rate:u},precision:{decimal:f}}=xe(),{onChange:y,onFocus:j}=ae(),{hide:m}=He(),{code:p}=t,I=x.useMemo(()=>l.code===p?l.value:l.value?t.value:"",[l.code,l.value,p,t.value]);return e.jsxs(ja,{onClick:()=>j(p),children:[e.jsxs(va,{children:[e.jsx(Fe,{strong:!0,children:n}),e.jsx(ot,{slotProps:{input:{startAdornment:de(p),onFocus:()=>y({value:I,code:p},{focus:!0})}},onValueChange:({value:h})=>y({value:h,code:p}),value:I,focused:i===p,decimalScale:f(p),isAllowed:({floatValue:h})=>!h||(u.code===t.code?Me.gt(h):Me.times(u.value).gt(h)),placeholder:"0","data-cy":`numeric-${o}`,sx:ba})]}),e.jsxs(g,{paddingLeft:"8px",alignItems:"flex-end",children:[e.jsx(wt,{avatar:e.jsx(ye,{currencyCode:p,size:"26px"}),clickable:!0,deleteIcon:e.jsx(L,{name:R.downSmall,size:S.sixteen}),onDelete:()=>{j(p),s()},onClick:()=>s(),label:p,sx:[ha,{justifyContent:"flex-end"}],"data-cy":`currency-${o}`}),e.jsx(Ca,{"data-cy":`balance-${o}`,children:e.jsx(Qe,{strong:!0,textAlign:"right",children:e.jsx(d,{id:"0I7ndP",defaultMessage:[{type:0,value:"Balance "},{type:1,value:"value"}],values:{value:m(de(p)+w({value:r,code:p},{prependFiatSymbol:!1,completeWithZerosAlways:!1}))}})})})]})]})},Ma=c(F)(({theme:a})=>({background:a.palette.designColors.surface.neutral.subdued,padding:"14px 16px",borderRadius:"8px",marginTop:"4px",width:"100%",justifyContent:"space-between"})),Sa=a=>{const{setPage:t,onSubmit:n,error:r,onRateEdit:s,orderLoading:o}=a,{trade:i,events:l,balance:u,bestPrice:f,isLoading:y,loading:j}=it(),{orderType:m,pay:p,receive:I,symbol:h,feeReceive:O,direction:P,rate:C}=i,{canBuy:_,canSell:H}=D(K=>Ct(K,i.symbol.symbolId))??{},re=P===M.buy?H:_,{isValid:ne,change:G,submit:Y}=r,{onDirection:X}=l,{formatMessage:B}=W();return e.jsxs(lt,{autoComplete:"off",onSubmit:K=>{K.preventDefault(),n()},children:[e.jsx(V,{isLoading:y,children:e.jsx(pe,{children:P===M.buy?e.jsx(d,{id:"wYWHNq",defaultMessage:[{type:0,value:"Buy "},{type:1,value:"currency"}],values:{currency:E[h.base]}}):e.jsx(d,{id:"zFLpZY",defaultMessage:[{type:0,value:"Sell "},{type:1,value:"currency"}],values:{currency:E[h.base]}})})}),e.jsxs(dt,{children:[e.jsx(ct,{isLoading:y}),e.jsx(V,{variant:"node",isLoading:y,children:e.jsx(ma,{onClick:()=>t(b.OrderType)})})]}),e.jsxs(ut,{children:[re&&e.jsx(fa,{onSwap:()=>X(P===M.buy?M.sell:M.buy),disabled:y}),e.jsx(V,{variant:"rounded",isLoading:y,children:e.jsx(Se,{currency:p,label:P===M.buy?B({id:"lD3+8a",defaultMessage:[{type:0,value:"Pay"}]}):B({id:"9AgXoz",defaultMessage:[{type:0,value:"Sell"}]}),balance:u.pay.value.toString(),onCurrency:()=>t(b.CurrencySelect),dataCy:"trade-sell"})}),e.jsx(V,{variant:"rounded",isLoading:y,children:e.jsx(Se,{currency:I,label:B({id:"ULXFfP",defaultMessage:[{type:0,value:"Receive"}]}),balance:u.receive.value.toString(),onCurrency:()=>t(b.CurrencySelect),dataCy:"trade-receive"})})]}),m===q.limit&&e.jsxs(Ma,{"data-cy":"target-price",children:[e.jsx(Q,{strong:!0,children:e.jsx(d,{id:"htYvdu",defaultMessage:[{type:0,value:"Target Price "},{type:1,value:"symbol"}],values:{symbol:h.base}})}),e.jsxs(F,{gap:"8px",alignItems:"center",children:[e.jsx(Q,{children:e.jsx(d,{id:"fwV3Ad",defaultMessage:[{type:0,value:"$"},{type:1,value:"value"}],values:{value:Number(C.value)}})}),e.jsx(L,{name:R.editPencil,size:S.fourteen,onClick:s})]})]}),e.jsxs(pt,{"data-cy":"fee-inclusive",children:[e.jsx(F,{gap:"4px",children:e.jsxs(V,{isLoading:y,children:[e.jsx(ge,{onClick:()=>t(b.Info),children:e.jsx(d,{id:"OVVZO+",defaultMessage:[{type:0,value:"Fees incl."}]})}),e.jsx(Q,{children:w({value:O.value,code:O.code},{appendCurrencyCode:A(O.code)})})]})}),e.jsx(V,{isLoading:j.depth,children:e.jsx(ge,{onClick:()=>t(b.MarketPrice),children:e.jsx(d,{id:"UfLkKg",defaultMessage:[{type:0,value:"1 "},{type:1,value:"symbol"},{type:0,value:" = "},{type:1,value:"value"}],values:{symbol:h.base,value:w({value:f.value,code:C.code})}})})})]}),e.jsxs(g,{gap:"24px",alignItems:"center",children:[e.jsx(Tt,{in:!!Y,children:e.jsx(be,{icon:!1,severity:"error",sx:[{marginTop:"12px"},fe],children:Y})}),G?e.jsx(be,{icon:!1,severity:"error",sx:fe,children:G}):e.jsx(V,{variant:"node",isLoading:y||j.depth,children:e.jsx(xt,{size:"medium",type:"submit",disabled:!ne||o,"data-cy":"place-buy-order-btn",children:m===q.limit?e.jsx(d,{id:"JItzoH",defaultMessage:[{type:0,value:"Place order"}]}):P===M.buy?e.jsx(d,{id:"wYWHNq",defaultMessage:[{type:0,value:"Buy "},{type:1,value:"currency"}],values:{currency:E[h.base]}}):e.jsx(d,{id:"zFLpZY",defaultMessage:[{type:0,value:"Sell "},{type:1,value:"currency"}],values:{currency:E[h.base]}})})})]})]})},wa=()=>{const{direction:a,pay:t,focus:n}=N(),{formatMessage:r}=W();return a===M.buy?n===t.code?{title:r({id:"/JQ7Fc",defaultMessage:[{type:0,value:"Pay with"}]})}:{title:r({id:"TkqaD3",defaultMessage:[{type:0,value:"Asset to buy"}]})}:n===t.code?{title:r({id:"fXREeZ",defaultMessage:[{type:0,value:"Asset to sell"}]})}:{title:r({id:"ULXFfP",defaultMessage:[{type:0,value:"Receive"}]})}},qe=()=>{const{direction:a,pay:t,receive:n,focus:r}=N(),{formatMessage:s}=W();return a===M.buy?r===t.code?{title:s({id:"WCZrv0",defaultMessage:[{type:0,value:"Total you buy"}]}),total:n,amount:t}:{title:s({id:"iVabzs",defaultMessage:[{type:0,value:"Total you pay"}]}),total:t,amount:n}:r===t.code?{title:s({id:"K8tPVx",defaultMessage:[{type:0,value:"Total you receive"}]}),total:n,amount:t}:{title:s({id:"1YUqi0",defaultMessage:[{type:0,value:"Total you sell"}]}),total:t,amount:n}},z=c(F)`
  justify-content: space-between;
  padding: 12px 0px;
`,Ne=c(({className:a,...t})=>e.jsx(kt,{...t,classes:{popper:a}}))(({theme:a})=>({[`& .${je.arrow}`]:{color:a.palette.designColors.surface.default,"&::before":{boxShadow:"0px 0px 2px 0px rgba(0, 0, 0, 0.20), 0px 2px 10px 0px rgba(0, 0, 0, 0.10)"}},[`& .${je.tooltip}`]:{background:a.palette.designColors.surface.default,padding:"12px"}})),Ta=c(Ee)(()=>({alignItems:"center",position:"sticky",top:0,padding:"8px"})),ka=c(Z)(()=>({flex:1,marginRight:"32px"})),se=a=>{const{onClose:t,headingText:n,showTooltip:r}=a;return e.jsxs(Ta,{children:[e.jsx(L,{name:R.cross,size:S.thirtyTwo,iconSize:S.fourteen,fill:s=>s.palette.designColors.icons.default,onClick:t}),e.jsx(ka,{children:n}),r&&e.jsx(Ne,{title:e.jsxs(g,{children:[e.jsx(Oe,{children:e.jsx(d,{id:"Jj56/I",defaultMessage:[{type:0,value:"Rate and price"}]})}),e.jsx(Fe,{children:e.jsx(d,{id:"UG0yZA",defaultMessage:[{type:0,value:"Rate may vary from the price due to the amount you are purchasing relative to the available supply."}]})})]}),arrow:!0,placement:"left",children:e.jsx(L,{"data-tooltip-id":"buySellInfoTooltip",name:"Home/InfoCircle",size:S.thirtyTwo,iconSize:S.fourteen,hoverBackgroundColor:s=>s.palette.designColors.surface.neutral.hovered,rounded:!0})})]})},Pa=c(g)(()=>({gap:"8px",height:"404px"})),Da=c(g)(()=>({padding:"0 16px 16px",gap:"8px"})),Fa=c(g)(()=>({gap:"4px",padding:"12px 0"})),Ia=a=>{const{onClose:t}=a,{symbol:n,beforeFeeReceive:r,feeReceive:s,feeRate:o,rate:i}=N(),{amount:l,total:u,title:f}=qe();return e.jsxs(Pa,{children:[e.jsx(se,{onClose:t,showTooltip:!0}),e.jsxs(Da,{children:[e.jsxs(Fa,{children:[e.jsx(Oe,{children:e.jsx(d,{id:"NfwDx2",defaultMessage:[{type:0,value:"Order details"}]})}),e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"Hymdxp",defaultMessage:[{type:0,value:"A "},{type:1,value:"feeRate"},{type:0,value:"% fee is applied."}],values:{feeRate:o.percent}})})]}),e.jsxs(g,{children:[e.jsxs(z,{children:[e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"/0TOL5",defaultMessage:[{type:0,value:"Amount"}]})}),e.jsx(v,{children:w({value:l.value,code:l.code},{appendCurrencyCode:A(l.code)})})]}),e.jsxs(z,{children:[e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"c0b5XV",defaultMessage:[{type:0,value:"Rate"}]})}),e.jsx(v,{children:e.jsx(d,{id:"UfLkKg",defaultMessage:[{type:0,value:"1 "},{type:1,value:"symbol"},{type:0,value:" = "},{type:1,value:"value"}],values:{symbol:n.base,value:w({value:i.value,code:i.code},{appendCurrencyCode:A(i.code)})}})})]}),e.jsxs(z,{children:[e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"8KRkzE",defaultMessage:[{type:0,value:"Before fee"}]})}),e.jsx(v,{children:w({value:r.value,code:r.code},{appendCurrencyCode:A(r.code)})})]}),e.jsxs(z,{children:[e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"HKO6eZ",defaultMessage:[{type:0,value:"Fee ("},{type:1,value:"feeRate"},{type:0,value:"%)"}],values:{feeRate:o.percent}})}),e.jsx(v,{children:w({value:s.value,code:s.code},{appendCurrencyCode:A(s.code)})})]}),e.jsxs(z,{children:[e.jsx(v,{subdued:!0,children:f}),e.jsx(v,{children:w({value:u.value,code:u.code},{appendCurrencyCode:A(u.code)})})]})]})]})]})},Oa={number:()=>({...Ge.light,fontSize:"48px",lineHeight:"40px",letterSpacing:"-0.8px"})},Ba=c("span")(a=>Ze(a,Oa.number)),Aa=x.lazy(()=>ue(()=>import("./Chart--asC7R1O.js").then(a=>a.C),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Ra=c(g)(()=>({width:"100%",gap:"8px",height:"404px"})),La=c(g)(()=>({gap:"8px",padding:"0 16px"})),za=c(F)(()=>({justifyContent:"space-between"})),Ha=c(Ae,{shouldForwardProp:ce(["dailyChange"])})(({theme:a,dailyChange:t})=>({lineHeight:"24px",letterSpacing:"0px",color:t>0?a.palette.designColors.text.price.up:a.palette.designColors.text.price.down,alignContent:"baseline"})),Ea=c(F)(()=>({gap:"8px",justifyContent:"center"})),we=c(Ae)(()=>({alignContent:"baseline"})),$a=c(g)(()=>({height:"100%",gap:"16px",paddingBottom:"24px"})),qa=a=>{const{onClose:t}=a,{symbol:n}=N(),{bestPrice:r}=yt(),{base:s,quote:o}=n,[i,l]=x.useState(k.OneDay),{dailyChange:u=0}=D(m=>Pe(m,n.symbolId)),{formatMessage:f}=W(),[y,j]=x.useMemo(()=>w({value:r.value,code:o},{appendCurrencyCode:!1,prependFiatSymbol:!1}).split("."),[r.value,o]);return e.jsxs(Ra,{children:[e.jsx(se,{headingText:e.jsxs(Ea,{children:[e.jsx(ye,{currencyCode:s,size:"24px"}),e.jsx(Z,{children:E[s]})]}),onClose:t}),e.jsxs($a,{children:[e.jsxs(La,{children:[e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"/L/paq",defaultMessage:[{type:1,value:"currencyName"},{type:0,value:" price ("},{type:1,value:"currencyCode"},{type:0,value:")"}],values:{currencyName:E[s],currencyCode:s}})}),e.jsxs(za,{children:[e.jsxs(F,{children:[e.jsx(we,{children:de(s)}),e.jsx(Ba,{children:y}),j&&e.jsx(we,{children:e.jsx(d,{id:"IXVPok",defaultMessage:[{type:0,value:"."},{type:1,value:"value"}],values:{value:j}})})]}),u!==0&&e.jsx(Ha,{dailyChange:u,children:e.jsx(d,{id:"a6eClJ",defaultMessage:[{type:1,value:"sign"},{type:1,value:"value"},{type:0,value:"%"}],values:{sign:u>0?"+":"-",value:new Ie(u).times(100).abs().toFixed(2)}})})]})]}),e.jsx(x.Suspense,{fallback:e.jsx(Be,{}),children:e.jsx(Aa,{symbol:n,period:i,bestPrice:r.value,hover:!1})}),e.jsx(g,{maxWidth:"100%",alignItems:"center",gap:"18px",marginBottom:"24px",children:e.jsx(Dt,{sx:Pt({tab:{root:{width:"45px"}}}),value:i,children:[{value:k.OneHour,label:f({id:"KGft5r",defaultMessage:[{type:0,value:"1h"}]})},{value:k.OneDay,label:f({id:"54iQNA",defaultMessage:[{type:0,value:"24h"}]})},{value:k.OneMonth,label:f({id:"kr31SN",defaultMessage:[{type:0,value:"1m"}]})},{value:k.OneQuarter,label:f({id:"b6waYy",defaultMessage:[{type:0,value:"1q"}]})},{value:k.OneYear,label:f({id:"1lkU0S",defaultMessage:[{type:0,value:"1y"}]})},{value:k.All,label:f({id:"zQvVDJ",defaultMessage:[{type:0,value:"All"}]})}].map(({value:m,label:p})=>e.jsx(Ft,{label:p,value:m,onClick:()=>l(m),disableRipple:!0},m))})})]})]})},Na=c(g)`
  padding: 16px 0px 32px;
`,_a=c(g)`
  gap: 8px;
  align-self: center;
`,Va=c("img")`
  width: 193px;
  height: 100px;
`,Ua=c(g)`
  padding: 16px 16px 8px 16px;
`,Wa=c(g)`
  padding: 8px 16px 16px;
`,Ya=c(pe)`
  align-self: center;
`,Ka=c(Re)`
  align-self: center;
`,Qa=a=>{const{onClose:t}=a,{symbol:n,beforeFeeReceive:r,feeReceive:s,rate:o}=N(),{title:i,amount:l,total:u}=qe();return e.jsxs(Na,{children:[e.jsxs(_a,{"data-cy":"order-confirmation-header",children:[e.jsx(Va,{src:`${bt}/Home/BuySell/Confirmation.png`}),e.jsx(Ya,{children:e.jsx(d,{id:"fGroR9",defaultMessage:[{type:0,value:"Order placed"}]})})]}),e.jsxs(Ua,{children:[e.jsxs(z,{"data-cy":"order-confirmation-amount",children:[e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"/0TOL5",defaultMessage:[{type:0,value:"Amount"}]})}),e.jsx(v,{children:w({value:l.value,code:l.code},{appendCurrencyCode:A(l.code)})})]}),e.jsxs(z,{"data-cy":"order-confirmation-price",children:[e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"b1zuN9",defaultMessage:[{type:0,value:"Price"}]})}),e.jsx(v,{children:e.jsx(d,{id:"UfLkKg",defaultMessage:[{type:0,value:"1 "},{type:1,value:"symbol"},{type:0,value:" = "},{type:1,value:"value"}],values:{symbol:n.base,value:w({value:o.value,code:o.code},{appendCurrencyCode:A(o.code)})}})})]}),e.jsxs(z,{"data-cy":"order-confirmation-beforefee",children:[e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"8KRkzE",defaultMessage:[{type:0,value:"Before fee"}]})}),e.jsx(v,{children:w({value:r.value,code:r.code},{appendCurrencyCode:A(r.code)})})]}),e.jsxs(z,{"data-cy":"order-confirmation-executionfee",children:[e.jsx(v,{subdued:!0,children:e.jsx(d,{id:"1G9NDp",defaultMessage:[{type:0,value:"Execution fee"}]})}),e.jsx(v,{children:w({value:s.value,code:s.code},{appendCurrencyCode:A(s.code)})})]})]}),e.jsx(It,{}),e.jsx(Wa,{"data-cy":"order-confirmation-totalyoubuy",children:e.jsxs(z,{children:[e.jsx(v,{subdued:!0,children:i}),e.jsx(v,{children:w({value:u.value,code:u.code},{appendCurrencyCode:A(u.code)})})]})}),e.jsx(Ka,{size:"medium",onClick:t,"data-cy":"order-confirmation-close",children:e.jsx(d,{id:"rbrahO",defaultMessage:[{type:0,value:"Close"}]})})]})},Za=c(g)`
  width: 100%;
  gap: 8px;
  height: 404px;
`,Ga=c(Z)`
  padding: 0 8px;
  gap: 4px;
`,Xa=c(L)(()=>({marginLeft:"auto"})),Ja=c(F,{shouldForwardProp:ce(["$active"])})(({theme:a,$active:t})=>({gap:"16px",padding:"11px 8px",alignItems:"center",cursor:"pointer",borderRadius:t?"8px":0,background:t?a.palette.designColors.interactive.secondary.default:a.palette.designColors.surface.default})),es=a=>{const{onClose:t}=a,{onOrderType:n}=ae(),{formatMessage:r}=W(),{orderTypes:s,orderType:o}=$e();return e.jsxs(Za,{children:[e.jsx(se,{headingText:r({id:"ekjmen",defaultMessage:[{type:0,value:"Order options"}]}),onClose:()=>t(o)}),e.jsx(Ga,{children:s.map(i=>{const l=i.value===o;return e.jsxs(Ja,{onClick:()=>{n(i.value),t(i.value)},$active:l,children:[i.left,e.jsxs(g,{"data-cy":`${i.value}-column`,children:[e.jsx(De,{children:i.label}),i.description&&e.jsx(Q,{subdued:!0,children:i.description})]}),l&&e.jsx(Xa,{name:R.tickMedium,size:S.twenty,iconSize:S.fourteen})]},i.value)})})]})},ts=a=>{const{base:t,quote:n}=D(Xe),r=D(Mt),s=x.useCallback(l=>a===M.buy?l.canBuy:l.canSell,[a]),o=x.useMemo(()=>r.filter(l=>l.quote.code===n&&s(l)).map(l=>l.base.code),[s,n,r]),i=x.useMemo(()=>r.filter(l=>l.base.code===t&&s(l)).map(l=>l.quote.code),[t,s,r]);return a===M.buy?{from:i,to:o}:{from:o,to:i}},as=c(g)(()=>({padding:0,height:"100%"})),ss=c(At)(()=>({height:"48px"})),rs=a=>{const{onClose:t}=a,{trade:{symbol:n,direction:r,focus:s}}=xe(),{onOrderType:o,clear:i,onFocus:l}=ae(),u=Je(),{title:f}=wa(),[y,j]=x.useState(""),[m,p]=x.useState(0),I=ee(),{formatMessage:h}=W(),{from:O,to:P}=ts(r),{sx:C,bottomRef:_,topRef:H}=Wt(),re=ee(),ne=Ot(re.breakpoints.down("sm")),{data:G}=Yt(),{country:Y,citizenship:X}=G||{},B=x.useMemo(()=>s===n.base,[s,n]),K=x.useMemo(()=>[h({id:"zQvVDJ",defaultMessage:[{type:0,value:"All"}]}),h({id:"+vylpT",defaultMessage:[{type:0,value:"Precious metals"}]}),h({id:"TdtZQ5",defaultMessage:[{type:0,value:"Crypto"}]}),...B?[]:[h({id:"B5TEQ6",defaultMessage:[{type:0,value:"Cash"}]})]],[h,B]),_e=T=>["KAU","KAG"].includes(T)?1:A(T)?2:3,Ve=x.useMemo(()=>{let T=[];return r===M.buy?T=B?P:O:T=B?O:P,T.filter($=>{const J=_e($),oe=m===0?B?J!==3:!0:J===m,Ue=$.toUpperCase().includes(y.toUpperCase())||E[$].toUpperCase().includes(y.toUpperCase()),We=!(Kt(Y,X)&&$===ie.KVT);return oe&&Ue&&We})},[r,B,P,O,m,y,Y,X]);return e.jsxs(as,{children:[e.jsxs(g,{children:[e.jsx(se,{headingText:f,onClose:t}),e.jsx(St,{className:"search-input",onChange:T=>{j(T.target.value)},autoComplete:"off",slotProps:{htmlInput:{style:{backgroundColor:I.palette.designColors.interactive.secondary.default,borderRadius:"20px",height:"0px"}},input:{style:{backgroundColor:I.palette.designColors.interactive.secondary.default,border:"none",borderRadius:"20px",height:"40px",margin:"8px",paddingLeft:"12px"}}},left:e.jsx(F,{children:e.jsx(L,{name:R.search,size:S.eighteen,fill:T=>T.palette.designColors.icons.default})}),placeholder:h({id:"xmcVZ0",defaultMessage:[{type:0,value:"Search"}]}),value:y,type:"text"}),e.jsx(ss,{hideScrollbars:!0,children:e.jsx(Bt,{type:"line",options:K,active:m,onTabChange:T=>p(T)})})]}),e.jsxs(Ut,{sx:[...Array.isArray(C)?C:[C],{padding:"8px 8px 0px 8px"}],inSwipeableComponent:ne,children:[e.jsx("div",{ref:H},"start"),Ve.map(T=>e.jsx(ya,{currencyCode:T,isAsset:B,direction:r,onCurrencyChange:$=>{const{base:J,quote:oe}=n;u(et(B?{base:$,quote:oe}:{base:J,quote:$})),i(),l($),o(q.market),t()}},T)),e.jsx("div",{ref:_},"end")]})]})},ns=x.lazy(async()=>await ue(()=>import("./TargetPrice-BEA8clvm.js"),__vite__mapDeps([12,1,2,13,14,15,16,17,18,19,20,21,4,5,6,7,8,9,10,11,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,0,3,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82]))),os=a=>{const{open:t,onClose:n}=a,{symbol:{base:r},direction:s}=N(),o=s===M.buy,[i,l]=x.useState(!1);return e.jsx(te,{drawerMobile:!0,sx:{"& .MuiDialogContent-root":{gap:"16px",paddingTop:"0",padding:0}},size:"sm",open:t,onClose:n,onClick:()=>l(!1),height:"580px",header:e.jsxs(Ee,{children:[e.jsx(Z,{sx:{gridArea:"header",flex:1,marginLeft:"32px"},children:e.jsx(d,{id:"cQ9sKT",defaultMessage:[{type:0,value:"Set a "},{type:1,value:"currencyName"},{type:0,value:" ("},{type:1,value:"base"},{type:0,value:") price"}],values:{currencyName:E[r].toLowerCase(),base:r}})}),e.jsx(Ne,{title:e.jsxs(g,{children:[e.jsx(pe,{children:e.jsx(d,{id:"FYhx9Y",defaultMessage:[{type:0,value:"Target price"}]})}),e.jsx(Q,{children:o?e.jsx(d,{id:"4xw4Ds",defaultMessage:[{type:0,value:"If you set a target price, you'll never pay more than the price you set. Your order will only be filled if the market price hits or goes lower than your target price."}]}):e.jsx(d,{id:"l9R8yb",defaultMessage:[{type:0,value:"If you set a target price, your asset won't sell for less than the price you set. Your sell order will only be filled if the market price hits or goes higher than the target price."}]})})]}),placement:"bottom-end",enterTouchDelay:0,arrow:!0,children:e.jsx(L,{name:R.information,size:S.thirtyTwo,iconSize:S.sixteen,fill:u=>u.palette.designColors.icons.default,hoverBackgroundColor:u=>u.palette.designColors.surface.hovered,rounded:!0})})]}),children:e.jsx(x.Suspense,{fallback:e.jsx(Be,{}),children:e.jsx(ns,{onClose:n,focus:i,onFocus:l})})})},is=()=>{const{trade:a}=xe(),{clear:t}=ae(),{onSubmit:n,handleFormSubmission:r,error:s,details:o,popup:{verifyPopup:i,setVerifyPopup:l,marketPopup:u,setMarketPopup:f}}=mt(),[y,j]=x.useState(!1),[m,p]=x.useState(b.Trade),{data:I}=gt(),{isSuccess:h,isLoading:O}=o,P=Le(),C=ee();x.useEffect(()=>{p(b.Trade)},[a.direction]),x.useEffect(()=>{h&&p(b.OrderConfirmation)},[h]);const _=x.useMemo(()=>{switch(m){case b.OrderConfirmation:return"507px";case b.CurrencySelect:return"410px";default:{let H=404;return a.orderType===q.limit&&(H+=56),s.submit&&(H+=56),`${H}px`}}},[m,a.orderType,s.submit]);return e.jsxs(e.Fragment,{children:[e.jsx(Qt,{sx:{transition:C.transitions.create("height",{duration:C.transitions.duration.standard,easing:C.transitions.easing.easeInOut}),height:_},children:{[b.Trade]:e.jsx(Sa,{setPage:p,onSubmit:()=>r({skipClear:!0,source:he.KmsHome}),orderLoading:O,error:s,onRateEdit:()=>j(!0)}),[b.Info]:e.jsx(Ia,{onClose:()=>p(b.Trade)}),[b.MarketPrice]:e.jsx(qa,{onClose:()=>p(b.Trade)}),[b.OrderConfirmation]:e.jsx(Qa,{onClose:()=>{t({skipRate:a.orderType===q.limit}),p(b.Trade)}}),[b.OrderType]:e.jsx(es,{onClose:H=>{H===q.limit&&j(!0),p(b.Trade)}}),[b.CurrencySelect]:e.jsx(rs,{onClose:()=>p(b.Trade)})}[m]}),!O&&e.jsx(os,{open:y,onClose:()=>{j(!1),p(b.Trade)}}),e.jsx(te,{open:u,onClose:()=>f(!1),children:I&&e.jsx(ft,{flags:I,onSubmit:async()=>{f(!1),await n({source:he.KmsHome})}})}),e.jsx(te,{open:i,onClose:()=>l(!1),children:e.jsx(ht,{type:vt.kyc,onButtonClick:()=>void P(le.kyc.path)})})]})},er=x.memo(is),ls=a=>{const{isOpen:t,onNextClick:n,onClose:r}=a,[s,o]=x.useState(!1),i=D(ze);return e.jsx(te,{open:t,onClose:()=>{r(),o(!1)},header:e.jsxs(g,{alignItems:"center",gap:"16px",paddingTop:"24px",children:[e.jsx(L,{name:R.cardWarning,size:S.eighty}),e.jsx(Xt,{children:e.jsx(d,{id:"MX1O1H",defaultMessage:[{type:0,value:"Some purchases may be blocked"}]})})]}),footer:e.jsxs(Gt,{column:!0,children:[e.jsx(tt,{size:"large",onClick:()=>{s&&Jt("paybis_warning",i),n()},children:e.jsx(d,{id:"p5wxjR",defaultMessage:[{type:0,value:"I understand"}]})}),e.jsxs(F,{alignItems:"center",children:[e.jsx(Zt,{checked:s,onClick:()=>o(!s)}),e.jsx(at,{children:e.jsx(d,{id:"Vaj9nj",defaultMessage:[{type:0,value:"Don't show this message again"}]})})]})]}),children:e.jsx(ta,{weight:"regular",subdued:!0,textAlign:"center",children:e.jsx(d,{id:"tXtk/x",defaultMessage:[{type:0,value:"A purchase may be declined if your banking or card provider does not support blockchain-based transactions. Kinesis has no control over whether your provider allows your digital asset purchase to be processed."}]})})})},ds=()=>{const a=D(st),t=D(o=>{var i;return(i=o.paybis.paybisData.paybisCountryEligibilityResponse.data)==null?void 0:i.isCountryEligible}),n=D(o=>aa(o.featureFlagState.flags.data,sa.paybis)),r=x.useMemo(()=>n||[me.individual,me.admin].includes(a)&&t,[n,a,t]),s=D(o=>o.featureFlagState.flags.loading||o.paybis.paybisData.paybisCountryEligibilityResponse.loading);return r&&!s},tr=a=>{const{onClick:t}=a,n=ds(),r=D(ze),[s,o]=x.useState(!1),i=ea("paybis_warning",r),l=Le(),{direction:u}=N(),f=ra();return e.jsxs(e.Fragment,{children:[u===M.buy&&n&&e.jsx(ls,{isOpen:s,onClose:()=>o(!1),onNextClick:()=>{o(!1),t==null||t(),l(le.purchase.path)}}),u===M.buy&&n?e.jsx(Re,{size:"small",onClick:f({required:rt.kycVerified,action:()=>{i?(t==null||t(),l(le.purchase.path)):o(!0)}}),startIcon:e.jsx(L,{name:R.creditCard,size:S.fourteen}),children:e.jsx(d,{id:"+4M/wt",defaultMessage:[{type:0,value:"Buy with card"}]})}):void 0]})};export{er as B,ya as C,oa as L,tr as P,ca as u};
